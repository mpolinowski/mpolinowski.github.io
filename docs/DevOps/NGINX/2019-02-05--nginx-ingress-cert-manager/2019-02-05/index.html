<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-DevOps/NGINX/2019-02-05--nginx-ingress-cert-manager/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">NGINX Ingress with Cert-Manager | Mike Polinowski</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://mpolinowski.github.io/docs/DevOps/NGINX/2019-02-05--nginx-ingress-cert-manager/2019-02-05"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="NGINX Ingress with Cert-Manager | Mike Polinowski"><meta data-rh="true" name="description" content="Port Vila, Vanuatu"><meta data-rh="true" property="og:description" content="Port Vila, Vanuatu"><link data-rh="true" rel="icon" href="/img/icons/favicon-32x32.png"><link data-rh="true" rel="canonical" href="https://mpolinowski.github.io/docs/DevOps/NGINX/2019-02-05--nginx-ingress-cert-manager/2019-02-05"><link data-rh="true" rel="alternate" href="https://mpolinowski.github.io/docs/DevOps/NGINX/2019-02-05--nginx-ingress-cert-manager/2019-02-05" hreflang="en"><link data-rh="true" rel="alternate" href="https://mpolinowski.github.io/docs/DevOps/NGINX/2019-02-05--nginx-ingress-cert-manager/2019-02-05" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Mike Polinowski RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Mike Polinowski Atom Feed">




<link rel="icon" href="/img/angular_momentum.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37,194,160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/angular_momentum.png">
<link rel="mask-icon" href="/img/angular_momentum.png" color="rgb(33,33,33)">
<meta name="msapplication-TileImage" content="/img/angular_momentum.png">
<meta name="msapplication-TileColor" content="#000">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-P74BDWF0C6"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-P74BDWF0C6",{})</script><link rel="stylesheet" href="/assets/css/styles.714c4925.css">
<link rel="preload" href="/assets/js/runtime~main.23698315.js" as="script">
<link rel="preload" href="/assets/js/main.2d20e69f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/angular_momentum.png" alt="Mike Polinowski :: Dev Notebook" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/angular_momentum.png" alt="Mike Polinowski :: Dev Notebook" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Mike Polinowski</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/docs/tags">Tags</a><a class="navbar__item navbar__link" href="/Search">Search</a><a href="https://mpolinowski.github.io/Personal" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">About<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mpolinowski" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/development">Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;Development&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/devops">DevOps</a><button aria-label="Toggle the collapsible sidebar category &#x27;DevOps&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/hashicorp">Hashicorp</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hashicorp&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/zabbix">Zabbix</a><button aria-label="Toggle the collapsible sidebar category &#x27;Zabbix&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/server-provisioning">Server Provisioning</a><button aria-label="Toggle the collapsible sidebar category &#x27;Server Provisioning&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/gitops">GitOps</a><button aria-label="Toggle the collapsible sidebar category &#x27;GitOps&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/kubernetes">Kubernetes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Kubernetes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/nginx">NGINX</a><button aria-label="Toggle the collapsible sidebar category &#x27;NGINX&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/NGINX/2022-12-08-nginx-websocket-proxy/2022-12-08">NGINX Websocket Proxy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/NGINX/2022-11-17-nginx-udp-tcp-load-balancing/2022-11-17">NGINX TCP/UDP Load Balancing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/NGINX/2021-02-23-nginx-agent-redirect/2021-02-23">NGINX Redirect based on User Agent</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/NGINX/2021-07-29--certbot-nginx-autorenewal/2021-07-29">Setting up Certbot Auto-renewal for NGINX (Maintenance Mode)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/NGINX/2021-02-22-nginx-docker-ingress/2021-02-22">NGINX Docker Ingress for your Gatsby Build</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/NGINX/2020-08-30--nginx-docker-multihost/2020-08-30">NGINX Docker Multihost</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/NGINX/2020-08-28--nginx-docker-certbot/2020-08-27">NGINX Docker with Certbot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/NGINX/2020-08-27--nginx-docker-ssl-certs-self-signed/2020-08-27">NGINX Docker with SSL Encryption (Self-signed)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/NGINX/2020-08-26--nginx-docker-setup/2020-08-26">NGINX Docker Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/NGINX/2020-07-29--securing-apache-and-nginx/2020-07-29">Securing Webservers - Apache and NGINX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/NGINX/2019-11-08--nginx-rtmp-website/2019-11-08">Adding an OBS Stream to your Website</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/NGINX/2019-11-07--nginx-rtmp-streaming-container/2019-11-07">Building an RTMP Streaming Server with Podman</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/DevOps/NGINX/2019-02-05--nginx-ingress-cert-manager/2019-02-05">NGINX Ingress with Cert-Manager</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/NGINX/2017-12-24--nginx-node-security/2017-12-24">NGINX, Node.js &amp; Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps/NGINX/2017-10-01--using-nginx-as-proxy-for-your-nodejs-apps/2017-10-01">Using NGINX as proxy for your nodejs apps</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/elasticsearch">Elasticsearch</a><button aria-label="Toggle the collapsible sidebar category &#x27;Elasticsearch&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/ansible">Ansible</a><button aria-label="Toggle the collapsible sidebar category &#x27;Ansible&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/server-security">Server Security</a><button aria-label="Toggle the collapsible sidebar category &#x27;Server Security&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/linux">Linux</a><button aria-label="Toggle the collapsible sidebar category &#x27;Linux&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/windows">Windows</a><button aria-label="Toggle the collapsible sidebar category &#x27;Windows&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/tomcat">Tomcat</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tomcat&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/salt">Salt</a><button aria-label="Toggle the collapsible sidebar category &#x27;Salt&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/internet-of-things--machine-learning">Internet-of-Things &amp; Machine Learning</a><button aria-label="Toggle the collapsible sidebar category &#x27;Internet-of-Things &amp; Machine Learning&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/devops"><span itemprop="name">DevOps</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/nginx"><span itemprop="name">NGINX</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">NGINX Ingress with Cert-Manager</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>NGINX Ingress with Cert-Manager</h1></header><p><img loading="lazy" alt="Port Vila, Vanuatu" src="/assets/images/photo-34477006171_65093dd884_o-fd4050ea9c0a99ce21eb30d5a6a60026.jpg" width="1978" height="895" class="img_ev3q"></p><ul><li><a href="#creating-the-ingress-controller">Creating the Ingress Controller</a></li><li><a href="#creating-the-ingress">Creating the Ingress</a></li><li><a href="#setting-up-cert-manager">Setting up Cert-Manager</a><ul><li><a href="#installing-via-helm">Installing via Helm</a></li><li><a href="#manual-installation">Manual Installation</a></li><li><a href="#verifying-the-installation">Verifying the installation</a></li></ul></li><li><a href="#setting-up-acme-test-issuers">Setting up ACME Test Issuers</a><ul><li><a href="#creating-certificate-resources">Creating Certificate Resources</a></li><li><a href="#updating-the-ingress">Updating the Ingress</a></li><li><a href="#testing-the-tls-access">Testing the TLS Access</a></li><li><a href="#going-into-production">Going into Production</a></li></ul></li></ul><p>The goal of this adventure is to add an <a href="https://github.com/kubernetes/ingress-nginx" target="_blank" rel="noopener noreferrer">NGINX Ingress</a> to our Kubernetes cluster that routes HTTPS traffic to cluster internal services. I want to use <a href="https://github.com/jetstack/cert-manager" target="_blank" rel="noopener noreferrer">cert-manager</a> to provision and manage TLS certificates for encrypting HTTP traffic to the Ingress.</p><p>I already have several apps and services running - all I need now is an Ingress that allows me to assign a domain name and TLS certificate to them and start routing traffic.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-ingress-controller">Creating the Ingress Controller<a class="hash-link" href="#creating-the-ingress-controller" title="Direct link to heading">â€‹</a></h2><p>To create these mandatory resources, use <code>kubectl apply</code> and the <code>-f</code> flag to specify the manifest file hosted on GitHub (or download it and apply it locally - <code>kubectl apply -f nginx-ingress-mandatory.yaml</code>):</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/master/deploy/mandatory.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We use apply instead of create here so that in the future we can incrementally apply changes to the Ingress Controller objects instead of completely overwriting them. </p><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="/assets/images/nginx-ingress-cert-manager_01-0d2303ca674276aa636b68172f676a20.png" width="732" height="162" class="img_ev3q"></p><p>Since I am not using a Cloud provider like AWS, GCE or Azure I cannot rely on an external load-balancer to spin on once I provide a service for my Ingress. Instead, I am going to add my <strong>WAN IP address</strong> - e.g. <code>172.111.3.1</code> - of the Master server to expose my Cluster through it directly. Also I am planing to use the same namespace for the ingress and all pods/services that are going to be served by it - <code>my-apps</code>. Create the following file <code>nano  nginx-ingress-service.yaml</code></p><p><strong>nginx-ingress-service.yaml</strong></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/part-of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> NodePort</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> http</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">targetPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">protocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">443</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">targetPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">443</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">protocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app.kubernetes.io/part-of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">externalIPs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> 172.111.3.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>I can apply the service with <code>kubectl apply -f nginx-ingress-service.yaml</code>:</p><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="data:image/png;base64,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" width="731" height="39" class="img_ev3q"></p><p>We can check that the service was created and the external IP assigned with the following command <code>kubectl get service ingress-nginx -n my-apps</code>:</p><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="data:image/png;base64,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" width="735" height="65" class="img_ev3q"></p><p>We now created an endpoint that can receive traffic over HTTP and HTTPS ports 80 and 443, and forwards it to the Ingress Controller Pod. The Ingress Controller will then route the traffic to the appropriate backend Service. We can now point our DNS records at this WAN IP address of our cluster and create the Ingress to implement routing rules.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-ingress">Creating the Ingress<a class="hash-link" href="#creating-the-ingress" title="Direct link to heading">â€‹</a></h2><p>Now we can create the Ingress to route traffic directed at two domains to a corresponding backend service. I&#x27;ll create a rule to route traffic directed at my.domain.com to the my-app1 backend service. Those two apps can be set up according to a <a href="/docs/DevOps/Kubernetes/2019-01-22--kubernetes-nginx-ingress/2019-01-22#create-two-web-apps-to-respond-to-the-incoming-traffic">previous Tutorial</a> - if you don&#x27;t have anyhting running on your cluster yet.</p><p>The Ingress configuration for this looks like this:</p><p><strong>nginx-ingress.yaml</strong></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> extensions/v1beta1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Ingress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kubernetes.io/ingress.class</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">nginx.ingress.kubernetes.io/app-root</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">host</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my.domain.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">paths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">backend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">serviceName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">app1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">servicePort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>An HTTP request Host header specifies the domain name of the target server. Requests with host my.domain.com will be directed to the my-app1 backend. Note that it is very likely that your service doesn&#x27;t use the port 80 - e.g. you have a container that hosts a website on port 3000 and a service that exposes it - just add the port here as <code>servicePort</code> and your website will be exposed by the Ingress on port 80 (http).</p><p>Apply the ingress with <code>kubectl apply -f nginx-ingress.yaml</code> and check if it was created with <code>kubectl get ingress -n my-apps</code>.</p><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="data:image/png;base64,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" width="735" height="74" class="img_ev3q"></p><p>To verify that the Ingress is working, open the page URLs inside your browser or run a curl command on your server:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">curl</span><span class="token plain"> my.domain.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-cert-manager">Setting up Cert-Manager<a class="hash-link" href="#setting-up-cert-manager" title="Direct link to heading">â€‹</a></h2><p>I want to try using <a href="https://helm.sh" target="_blank" rel="noopener noreferrer">Helm</a> to install <a href="https://docs.cert-manager.io/en/venafi/tutorials/quick-start/index.html" target="_blank" rel="noopener noreferrer">cert-manager</a> into the Kubernetes cluster. cert-manager is a Kubernetes service that provisions TLS certificates from <a href="https://letsencrypt.org/" target="_blank" rel="noopener noreferrer">Let&#x27;s Encrypt</a> and other certificate authorities and manages their lifecycles.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-via-helm">Installing via Helm<a class="hash-link" href="#installing-via-helm" title="Direct link to heading">â€‹</a></h3><blockquote><p><strong>Note</strong>: I ran into a lot of difficulties using this setup and I could not find the error. <a href="https://docs.cert-manager.io/en/latest/getting-started/troubleshooting.html" target="_blank" rel="noopener noreferrer">Troubleshooting</a> led me back to the <a href="https://docs.cert-manager.io/en/latest/getting-started/install.html" target="_blank" rel="noopener noreferrer">Installation Page</a> - so I ended up abandoning Helm and did the <a href="#manual-installation">manual installation</a>. If you are an Helm expert and spot my error - please let me know. My assumption is that it might be namespace related as I tried to move everything into a custom namespace instead of going with the default <code>cert-manager</code> ? I will opt for all-default with the manual installation.</p></blockquote><p>Before using Helm to install cert-manager into our cluster, we need to create the cert-manager <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/" target="_blank" rel="noopener noreferrer">Custom Resource Definitions (CRDs)</a>. Create these by applying them directly from the cert-manager <a href="https://github.com/jetstack/cert-manager/" target="_blank" rel="noopener noreferrer">GitHub repository</a>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/jetstack/cert-manager/release-0.7/deploy/manifests/00-crds.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="/assets/images/nginx-ingress-cert-manager_05-c321bd26e996e0c540ebba84abe6bb1d.png" width="733" height="88" class="img_ev3q"></p><p>In order to provide advanced resource validation, cert-manager includes a <code>ValidatingWebhookConfiguration</code> which is deployed into the cluster as its own pod:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl label namespace kube-system certmanager.k8s.io/disable-validation</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;true&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Helm now has an installer script that will automatically grab the latest version of the Helm client and <a href="https://raw.githubusercontent.com/helm/helm/master/scripts/get" target="_blank" rel="noopener noreferrer">install it locally</a>. You can fetch that script, and then execute it locally:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">curl</span><span class="token plain"> https://raw.githubusercontent.com/helm/helm/master/scripts/get </span><span class="token operator">&gt;</span><span class="token plain"> get_helm.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">chmod</span><span class="token plain"> </span><span class="token number">700</span><span class="token plain"> get_helm.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./get_helm.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="/assets/images/nginx-ingress-cert-manager_06-8f409a189e74beff68b96711a6e2143c.png" width="736" height="209" class="img_ev3q"></p><p><strong>INSTALLING TILLER</strong></p><p>Tiller, the server portion of Helm, typically runs inside of your Kubernetes cluster. But for development, it can also be run locally, and configured to talk to a remote Kubernetes cluster.</p><p>The easiest way to install <strong>tiller</strong> into the cluster is simply to run <code>helm init</code>. This will validate that helmâ€™s local environment is set up correctly (and set it up if necessary). Then it will connect to whatever cluster kubectl connects to by default <code>kubectl config view</code>. Once it connects, it will install tiller into the <code>kube-system</code> namespace.</p><p>After <code>helm init</code>, you should be able to run <code>kubectl get pods --namespace kube-system</code> and see Tiller running:</p><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="/assets/images/nginx-ingress-cert-manager_07-cc6d836737cd0088a1fb0892dd07709c.png" width="733" height="357" class="img_ev3q"></p><p>Finally, we can install the <a href="https://github.com/helm/charts/tree/master/stable/cert-manager" target="_blank" rel="noopener noreferrer">cert-manager Helm chart</a> into the <code>kube-system</code> namespace:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> --name cert-manager --namespace kube-system stable/cert-manager</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Note</strong> : if you get the following <strong>ERROR</strong>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Error: release cert-manager failed: namespaces </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kube-system&quot;</span><span class="token plain"> is forbidden: User </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;system:serviceaccount:kube-system:default&quot;</span><span class="token plain"> cannot get resource </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;namespaces&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> API group </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> the namespace </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kube-system&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Run the following command (see <a href="https://github.com/fnproject/fn-helm/issues/21" target="_blank" rel="noopener noreferrer">Github Issue</a>) and rerun the <code>helm install</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl patch deploy --namespace kube-system tiller-deploy -p </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{&quot;spec&quot;:{&quot;template&quot;:{&quot;spec&quot;:{&quot;serviceAccount&quot;:&quot;tiller&quot;}}}}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="/assets/images/nginx-ingress-cert-manager_08-94922b59314c7e46bb9cc5b73f3c7dbf.png" width="732" height="249" class="img_ev3q"></p><p>This indicates that the cert-manager installation succeeded.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="manual-installation">Manual Installation<a class="hash-link" href="#manual-installation" title="Direct link to heading">â€‹</a></h3><p>It is deployed using regular YAML manifests, like any other applications on Kubernetes.</p><p>In order to install cert-manager, we must first create a namespace to run it within. This guide will install cert-manager into the cert-manager namespace. It is possible to run <code>cert-manager</code> in a different namespace, although you will need to make modifications to the deployment manifests.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl create namespace cert-manager</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As part of the installation, cert-manager also deploys a <strong>ValidatingWebhookConfiguration</strong> resource in order to validate that the Issuer, ClusterIssuer and Certificate resources we will create after installation are valid.</p><p>In order to deploy the <strong>ValidatingWebhookConfiguration</strong>, cert-manager creates a number of internal Issuer and Certificate resources in its own namespace. This creates a chicken-and-egg problem, where cert-manager requires the webhook in order to create the resources, and the webhook requires cert-manager in order to run. This problem is avoided by disabling resource validation on the namespace that cert-manager runs in:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl label namespace cert-manager certmanager.k8s.io/disable-validation</span><span class="token operator">=</span><span class="token plain">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can now go ahead and install cert-manager. All resources (the CustomResourceDefinitions, cert-manager, and the webhook component) are included in a single YAML manifest file:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/jetstack/cert-manager/release-0.7/deploy/manifests/cert-manager.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="/assets/images/nginx-ingress-cert-manager_12-0d9232c9a39b44d7c6b8a793b45fd822.png" width="733" height="428" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="verifying-the-installation">Verifying the installation<a class="hash-link" href="#verifying-the-installation" title="Direct link to heading">â€‹</a></h3><p>Once youâ€™ve installed cert-manager, you can verify it is deployed correctly by checking the <code>cert-manager</code> namespace for running pods:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl get pods --namespace cert-manager</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="data:image/png;base64,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" width="733" height="77" class="img_ev3q"></p><p>You should see both the cert-manager and webhook component in a Running state, and the ca-sync pod is Completed. If the webhook has not Completed but the cert-manager pod has recently started, wait a few minutes for the ca-sync pod to be retried. If you experience problems, please check the <a href="https://docs.cert-manager.io/en/latest/getting-started/troubleshooting.html" target="_blank" rel="noopener noreferrer">troubleshooting guide</a>.</p><p>The following steps will confirm that cert-manager is set up correctly and able to issue basic certificate types:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># Create a ClusterIssuer to test the webhook works okay</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation operator" style="color:rgb(248, 248, 242)">&gt;</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> test-resources.yaml</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">apiVersion: v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">kind: Namespace</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  name: cert-manager-test</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">---</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">apiVersion: certmanager.k8s.io/v1alpha1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">kind: Issuer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  name: test-selfsigned</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  namespace: cert-manager-test</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">spec:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  selfSigned: {}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">---</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">apiVersion: certmanager.k8s.io/v1alpha1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">kind: Certificate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  name: selfsigned-cert</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  namespace: cert-manager-test</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">spec:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  commonName: example.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  secretName: selfsigned-cert-tls</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  issuerRef:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">    name: test-selfsigned</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Create the test resources</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply -f test-resources.yaml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Check the status of the newly created certificate</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># You may need to wait a few seconds before cert-manager processes the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># certificate request</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl describe certificate -n cert-manager-test</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Name:         selfsigned-cert</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Namespace:    cert-manager-test</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Labels:       </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Annotations:  kubectl.kubernetes.io/last-applied-configuration:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;apiVersion&quot;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;certmanager.k8s.io/v1alpha1&quot;</span><span class="token plain">,</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kind&quot;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Certificate&quot;</span><span class="token plain">,</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;metadata&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;annotations&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain">,</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;name&quot;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;selfsigned-cert&quot;</span><span class="token plain">,</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;namespace&quot;</span><span class="token plain">:&quot;cert-m</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">API Version:  certmanager.k8s.io/v1alpha1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Kind:         Certificate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Creation Timestamp:  </span><span class="token number">2019</span><span class="token plain">-03-29T08:52:04Z</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Generation:          </span><span class="token number">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Resource Version:    </span><span class="token number">5871553</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Self Link:           /apis/certmanager.k8s.io/v1alpha1/namespaces/cert-manager-test/certificates/selfsigned-cert</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token environment constant" style="color:rgb(189, 147, 249)">UID</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain">                 ed15e107-51ff-11e9-b7a0-960000184ec8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Spec:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Common Name:  example.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Issuer Ref:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Name:       test-selfsigned</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Secret Name:  selfsigned-cert-tls</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Status:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Conditions:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Last Transition Time:  </span><span class="token number">2019</span><span class="token plain">-03-29T08:52:05Z</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Message:               Certificate is up to </span><span class="token function" style="color:rgb(80, 250, 123)">date</span><span class="token plain"> and has not expired</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Reason:                Ready</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Status:                True</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Type:                  Ready</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Not After:               </span><span class="token number">2019</span><span class="token plain">-06-27T08:52:05Z</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Events:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Type    Reason      Age   From          Message</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ----    ------      ----  ----          -------</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Normal  CertIssued  31s   cert-manager  Certificate issued successfully</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Clean up the test resources</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl delete -f test-resources.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If all the above steps have completed without error, you are good to go!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-acme-test-issuers">Setting up ACME Test Issuers<a class="hash-link" href="#setting-up-acme-test-issuers" title="Direct link to heading">â€‹</a></h2><p>When you create a new ACME Issuer, cert-manager will generate a private key which is used to identify you with the ACME server. To set up a basic ACME issuer, you should create a new Issuer (bound to a namespace) or ClusterIssuer (can be referenced over all namespaces) resource. In this example, we will create a non-namespaced ClusterIssuer resource for the <a href="https://letsencrypt.org/docs/staging-environment/" target="_blank" rel="noopener noreferrer">Letâ€™s Encrypt staging endpoint</a> that has only the <a href="https://docs.cert-manager.io/en/latest/tasks/acme/configuring-http01.html" target="_blank" rel="noopener noreferrer">HTTP01 Challenge Provider</a> enabled.</p><p>You should read the guides linked at the bottom of this page to learn more about the ACME challenge validation mechanisms that cert-manager supports and how to configure the various DNS01 provider implementations.</p><p>Let&#x27;s create a test Issuer to make sure the certificate provisioning mechanism is functioning correctly. Open a file named staging_issuer.yaml in your favorite text editor no cert-staging_issuer.yaml`:</p><p><strong>cert-staging_issuer.yaml</strong></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> certmanager.k8s.io/v1alpha1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterIssuer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> letsencrypt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">staging</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token key atrule">acme</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token comment" style="color:rgb(98, 114, 164)"># The ACME server URL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//acme</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">staging</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">v02.api.letsencrypt.org/directory</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token comment" style="color:rgb(98, 114, 164)"># Email address used for ACME registration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token key atrule">email</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> your_email_address_here</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token comment" style="color:rgb(98, 114, 164)"># Name of a secret used to store the ACME account private key</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token key atrule">privateKeySecretRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> letsencrypt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">staging</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">secret</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token comment" style="color:rgb(98, 114, 164)"># Enable the HTTP-01 challenge provider</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token key atrule">http01</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here we specify that we&#x27;d like to create a <code>ClusterIssuer</code> object called <code>letsencrypt-staging</code>, and use the Let&#x27;s Encrypt staging server. We&#x27;ll later use the production server to roll out our certificates. We then specify an email address to register the certificate, and create a Kubernetes Secret called <code>letsencrypt-staging-secret</code> to store the ACME account&#x27;s private key. We also enable the <strong>HTTP-01 challenge mechanism</strong>. To learn more about these parameters, consult the <a href="https://cert-manager.readthedocs.io/en/latest/reference/issuers.html" target="_blank" rel="noopener noreferrer">official cert-manager documentation</a>. Go on and create the Issuer:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply -f cert-staging-issuer.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To verify that the account has been registered successfully, you can run <code>kubectl describe</code> and check the <code>Ready</code> condition:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl describe clusterissuer letsencrypt-staging</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="/assets/images/nginx-ingress-cert-manager_09-6c8bf3a2e6b0220c1ab49a9624b157da.png" width="733" height="497" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-certificate-resources">Creating Certificate Resources<a class="hash-link" href="#creating-certificate-resources" title="Direct link to heading">â€‹</a></h3><p>The <a href="https://docs.cert-manager.io/en/latest/tasks/acme/issuing-certificates.html" target="_blank" rel="noopener noreferrer">Certificate resource</a> type is used to request certificates from different Issuers. A Certificate resource specifies fields that are used to generated certificate signing requests which are then fulfilled by the issuer type you have referenced.</p><p>Certificates specify which issuer they want to obtain the certificate from by specifying the <code>certificate.spec.issuerRef</code> field. A basic Certificate resource, for the example.com and <a href="http://www.example.com" target="_blank" rel="noopener noreferrer">www.example.com</a> DNS names. We must configure our Certificate resource with the <code>ingress class</code> that will be used to solve the <strong>ACME HTTP01</strong> challenges:</p><p><strong>cert-staging.yaml</strong></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> certmanager.k8s.io/v1alpha1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Certificate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">secretName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">com</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">tls</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">commonName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my.domain.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">dnsNames</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> my.domain.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> www.my.domain.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">issuerRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> letsencrypt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">staging</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># We can reference ClusterIssuers by changing the kind here.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># The default value is Issuer (i.e. a locally namespaced Issuer)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterIssuer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">acme</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">http01</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">ingressClass</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">domains</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> my.domain.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> www.my.domain.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The signed certificate will be stored in a Secret resource named <code>my-domain-com-tls</code> once the issuer has successfully issued the requested certificate. The Certificate will be issued using the <strong>ClusterIssuer</strong> named <code>letsencrypt-staging</code> in the <code>default</code> namespace (the same namespace as the Certificate resource).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="updating-the-ingress">Updating the Ingress<a class="hash-link" href="#updating-the-ingress" title="Direct link to heading">â€‹</a></h3><p>We can now modify our Ingress and enable TLS encryption for the my.domain.com path - <code>nano nginx-ingress.yaml</code>:</p><p><strong>nginx-ingress.yaml</strong></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> extensions/v1beta1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Ingress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kubernetes.io/ingress.class</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">certmanager.k8s.io/cluster-issuer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> letsencrypt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">staging</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">nginx.ingress.kubernetes.io/app-root</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">tls</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">hosts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> my.domain.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">secretName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">com</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">tls</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">host</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my.domain.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">paths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">backend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">serviceName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">app1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">servicePort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here we add the annotations to specify an <code>ingress.class</code>, which determines the Ingress Controller. In addition, we define the cluster-issuer to be <code>letsencrypt-staging</code>. Finally, we add a tls block to specify the hosts for which we want to acquire certificates, and specify a secretName. This secret will contain the TLS private key and issued certificate. Apply your edits with <code>kubectl apply -f nginx-ingress.yaml</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="testing-the-tls-access">Testing the TLS Access<a class="hash-link" href="#testing-the-tls-access" title="Direct link to heading">â€‹</a></h3><p>Run <code>kubectl describe ingress -n default</code> to see that the certificate has been successfully created:</p><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="/assets/images/nginx-ingress-cert-manager_10-1b1a9965716b46ce019ed362fa174d94.png" width="733" height="81" class="img_ev3q"></p><p>Once the certificate has been successfully created, you can run an additional <code>kubectl describe certificate -n default</code> on it to further confirm its successful creation. You should see the following output in the Events section:</p><p><img loading="lazy" alt="NGINX Ingress for your Kubernetes Cluster" src="/assets/images/nginx-ingress-cert-manager_11-4ed477a4c960bf43a8edb3313d997ece.png" width="733" height="129" class="img_ev3q"></p><p>I am seeing some error messages that the TLS certificate could not be saved after the order comes through. But the problem seems to goes away and the certificate is successfully issued. The same happens again when I restart the service - I am not sure right now if this is a bigger problem.</p><p>We&#x27;re now ready to send a request to our backend server to test that HTTPS is functioning correctly. Run the following <strong>wget command</strong> to send a request to <em>my.domain.com</em>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">wget</span><span class="token plain"> --save-headers -O- my.domain.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see the following output:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">wget</span><span class="token plain"> --save-headers -O- my.domain.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--2019-03-28 </span><span class="token number">11</span><span class="token plain">:26:30--  http://my.domain.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Resolving my.domain.com </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">my.domain.com</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. </span><span class="token number">172.111</span><span class="token plain">.3.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Connecting to my.domain.com </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">my.domain.com</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">|</span><span class="token number">172.111</span><span class="token plain">.3.1</span><span class="token operator">|</span><span class="token plain">:80</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. connected.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">HTTP request sent, awaiting response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. </span><span class="token number">308</span><span class="token plain"> Permanent Redirect</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">2019</span><span class="token plain">-03-28 </span><span class="token number">11</span><span class="token plain">:26:30 ERROR </span><span class="token number">308</span><span class="token plain">: Permanent Redirect.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Accessing our backend over <strong>http / port 80</strong> no longer works - the ingress now tries to redirect us to use <strong>https / port 443</strong>.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">wget</span><span class="token plain"> --save-headers -O- https://my.domain.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can prefix the request with https to see the response header for an TLS encrypted request:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">--2019-03-29 </span><span class="token number">11</span><span class="token plain">:27:00--  https://my.domain.com/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Resolving my.domain.com </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">my.domain.com</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. </span><span class="token number">172.111</span><span class="token plain">.3.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Connecting to my.domain.com </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">my.domain.com</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">|</span><span class="token number">172.111</span><span class="token plain">.3.1</span><span class="token operator">|</span><span class="token plain">:443</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. connected.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ERROR: cannot verify my.domain.com</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;s certificate, issued by â€˜/CN=Fake LE Intermediate X1â€™:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  Unable to locally verify the issuer&#x27;</span><span class="token plain">s authority.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">To connect to my.domain.com insecurely, use `--no-check-certificate&#x27;.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This indicates that HTTPS has successfully been enabled, but the certificate cannot be verified as it&#x27;s a fake temporary certificate issued by the Let&#x27;s Encrypt staging server. Now that we&#x27;ve tested that everything works using this temporary fake certificate, we can roll out production certificates for the host <code>my.domain.com</code>.</p><p><strong>Note</strong>: As mentioned earlier, I tried to install cert manager using Helm - and at this point I saw the first Problem that the installation wasn&#x27;t working. Instead of the <code>Intermediate X1</code> certificate, I was seeing the default <strong>Kubernetes Ingress Controller Fake Certificate</strong> - telling me that the whole thing wasn&#x27;t working:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">wget</span><span class="token plain"> --save-headers -O- https://my.domain.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--2019-03-28 </span><span class="token number">11</span><span class="token plain">:26:41--  https://my.domain.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Resolving my.domain.com </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">my.domain.com</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. </span><span class="token number">172.111</span><span class="token plain">.3.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Connecting to my.domain.com </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">my.domain.com</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">|</span><span class="token number">172.111</span><span class="token plain">.3.1</span><span class="token operator">|</span><span class="token plain">:443</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. connected.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ERROR: cannot verify my.domain.com</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;s certificate, issued by â€˜/O=Acme Co/CN=Kubernetes Ingress Controller Fake Certificateâ€™:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  Unable to locally verify the issuer&#x27;</span><span class="token plain">s authority.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ERROR: no certificate subject alternative name matches</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        requested </span><span class="token function" style="color:rgb(80, 250, 123)">host</span><span class="token plain"> name â€˜my.domain.comâ€™.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">To connect to my.domain.com insecurely, use `--no-check-certificate&#x27;.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="going-into-production">Going into Production<a class="hash-link" href="#going-into-production" title="Direct link to heading">â€‹</a></h3><p>In this step weâ€™ll modify the procedure used to provision staging certificates, and generate a valid, verifiable production certificate for our Ingress hosts.</p><p>To begin, we&#x27;ll first create a production certificate ClusterIssuer <code>nano cert-production-issuer.yaml</code>:</p><p><strong>cert-production-issuer.yaml</strong></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> certmanager.k8s.io/v1alpha1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterIssuer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> letsencrypt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">production</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">acme</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># The ACME server URL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//acme</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">v02.api.letsencrypt.org/directory</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># Email address used for ACME registration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">email</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> your_email_address_here</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># Name of a secret used to store the ACME account private key</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">privateKeySecretRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> letsencrypt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">production</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">secret</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># Enable the HTTP-01 challenge provider</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">http01</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We are changing the server address to receive an production ready certificate and store it inside the secret <code>letsencrypt-production</code>. To make use of our new production issuer we now have to edit our Ingress and add both the new issuer and the secret - <code>nano nginx-ingress.yaml</code>:</p><p><strong>nginx-ingress.yaml</strong></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> extensions/v1beta1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Ingress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kubernetes.io/ingress.class</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">certmanager.k8s.io/cluster-issuer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> letsencrypt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">production</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">tls</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">hosts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> my.domain.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">secretName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">com</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">tls</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">host</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my.domain.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">paths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">backend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">serviceName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">app1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">servicePort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Because I already used my domain for the staging environment, I am first going to delete the prior certificate resource <code>kubectl delete -f cert-staging.yaml</code> and then apply the following production cert definition <code>kubectl apply -f cert-production.yaml.yaml</code>:</p></blockquote><p><strong>cert-production.yaml</strong></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> certmanager.k8s.io/v1alpha1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Certificate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">secretName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">com</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">tls</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">commonName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my.domain.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">dnsNames</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> my.domain.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> www.my.domain.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">issuerRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> letsencrypt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">production</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># We can reference ClusterIssuers by changing the kind here.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># The default value is Issuer (i.e. a locally namespaced Issuer)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterIssuer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">acme</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">http01</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">ingressClass</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">domains</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> my.domain.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> www.my.domain.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then apply both changes with <code>kubectl apply -f cert-production-issuer.yaml</code> and <code>kubectl apply -f nginx-ingress.yaml</code>. We can re-test the access and see if we now receive a valid certificate from our server:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">wget</span><span class="token plain"> --save-headers -O- https://my.domain.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And you should now see the expected response from your application that you bound to the Ingress (the exact output here will vary accordingly):</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">--2019-03-29 </span><span class="token number">12</span><span class="token plain">:09:28--  https://my.domain.com/en</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Resolving my.domain.com </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">my.domain.com</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. </span><span class="token number">172.111</span><span class="token plain">.3.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Connecting to my.domain.com </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">my.domain.com</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">|</span><span class="token number">172.111</span><span class="token plain">.3.1</span><span class="token operator">|</span><span class="token plain">:443</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. connected.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">HTTP request sent, awaiting response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. </span><span class="token number">301</span><span class="token plain"> Moved Permanently</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Location: /en/ </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">following</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--2019-03-29 </span><span class="token number">12</span><span class="token plain">:09:28--  https://my.domain.com/en/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Reusing existing connection to my.domain.com:443.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">HTTP request sent, awaiting response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. </span><span class="token number">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Length: </span><span class="token number">170474</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">166K</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">text/html</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Saving to: â€˜STDOUTâ€™</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">HTTP/1.1 </span><span class="token number">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Server: nginx/1.15.9</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Date: Fri, </span><span class="token number">29</span><span class="token plain"> Mar </span><span class="token number">2019</span><span class="token plain"> </span><span class="token number">11</span><span class="token plain">:09:28 GMT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Content-Type: text/html</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">charset</span><span class="token operator">=</span><span class="token plain">UTF-8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Content-Length: </span><span class="token number">170474</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Connection: keep-alive</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Vary: Accept-Encoding</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">X-DNS-Prefetch-Control: off</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">X-Frame-Options: SAMEORIGIN</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Strict-Transport-Security: max-age</span><span class="token operator">=</span><span class="token number">15724800</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> includeSubDomains</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">X-Download-Options: noopen</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">X-Content-Type-Options: nosniff</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">X-XSS-Protection: </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">mode</span><span class="token operator">=</span><span class="token plain">block</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Accept-Ranges: bytes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Cache-Control: public, max-age</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Last-Modified: Tue, </span><span class="token number">26</span><span class="token plain"> Mar </span><span class="token number">2019</span><span class="token plain"> 08:55:34 GMT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ETag: W/</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;299ea-169b9363f70&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Vary: Accept-Encoding</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/linux">LINUX</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/docker">Docker</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/kubernetes">Kubernetes</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/nginx">NGINX</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/NGINX/2019-02-05--nginx-ingress-cert-manager/index.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/DevOps/NGINX/2019-11-07--nginx-rtmp-streaming-container/2019-11-07"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Building an RTMP Streaming Server with Podman</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/DevOps/NGINX/2017-12-24--nginx-node-security/2017-12-24"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">NGINX, Node.js &amp; Security</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#creating-the-ingress-controller" class="table-of-contents__link toc-highlight">Creating the Ingress Controller</a></li><li><a href="#creating-the-ingress" class="table-of-contents__link toc-highlight">Creating the Ingress</a></li><li><a href="#setting-up-cert-manager" class="table-of-contents__link toc-highlight">Setting up Cert-Manager</a><ul><li><a href="#installing-via-helm" class="table-of-contents__link toc-highlight">Installing via Helm</a></li><li><a href="#manual-installation" class="table-of-contents__link toc-highlight">Manual Installation</a></li><li><a href="#verifying-the-installation" class="table-of-contents__link toc-highlight">Verifying the installation</a></li></ul></li><li><a href="#setting-up-acme-test-issuers" class="table-of-contents__link toc-highlight">Setting up ACME Test Issuers</a><ul><li><a href="#creating-certificate-resources" class="table-of-contents__link toc-highlight">Creating Certificate Resources</a></li><li><a href="#updating-the-ingress" class="table-of-contents__link toc-highlight">Updating the Ingress</a></li><li><a href="#testing-the-tls-access" class="table-of-contents__link toc-highlight">Testing the TLS Access</a></li><li><a href="#going-into-production" class="table-of-contents__link toc-highlight">Going into Production</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Research</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Notebook</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tags">Tags</a></li><li class="footer__item"><a class="footer__link-item" href="/Curriculum-Vitae">CV</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/in/mike-polinowski-6396ba121/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/MikePolinowski" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.flickr.com/people/149680084@N06/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flickr<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/mpolinowski" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Mike Polinowski, INSTAR Deutschland GmbH, Shenzhen - China.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.23698315.js"></script>
<script src="/assets/js/main.2d20e69f.js"></script>
</body>
</html>