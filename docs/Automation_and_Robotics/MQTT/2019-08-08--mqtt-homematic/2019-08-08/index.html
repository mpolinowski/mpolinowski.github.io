<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Automation_and_Robotics/MQTT/2019-08-08--mqtt-homematic/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">MQTT Networks with Homematic | Mike Polinowski</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://mpolinowski.github.io/docs/Automation_and_Robotics/MQTT/2019-08-08--mqtt-homematic/2019-08-08"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="MQTT Networks with Homematic | Mike Polinowski"><meta data-rh="true" name="description" content="Central, Hong Kong"><meta data-rh="true" property="og:description" content="Central, Hong Kong"><link data-rh="true" rel="icon" href="/img/icons/favicon-32x32.png"><link data-rh="true" rel="canonical" href="https://mpolinowski.github.io/docs/Automation_and_Robotics/MQTT/2019-08-08--mqtt-homematic/2019-08-08"><link data-rh="true" rel="alternate" href="https://mpolinowski.github.io/docs/Automation_and_Robotics/MQTT/2019-08-08--mqtt-homematic/2019-08-08" hreflang="en"><link data-rh="true" rel="alternate" href="https://mpolinowski.github.io/docs/Automation_and_Robotics/MQTT/2019-08-08--mqtt-homematic/2019-08-08" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Mike Polinowski RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Mike Polinowski Atom Feed">




<link rel="icon" href="/img/angular_momentum.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37,194,160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/angular_momentum.png">
<link rel="mask-icon" href="/img/angular_momentum.png" color="rgb(33,33,33)">
<meta name="msapplication-TileImage" content="/img/angular_momentum.png">
<meta name="msapplication-TileColor" content="#000">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-P74BDWF0C6"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-P74BDWF0C6",{})</script><link rel="stylesheet" href="/assets/css/styles.dcca9435.css">
<script src="/assets/js/runtime~main.9a0cc3b5.js" defer="defer"></script>
<script src="/assets/js/main.6d14a3ae.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_gu5v" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/angular_momentum.png" alt="Mike Polinowski :: Dev Notebook" class="themedComponent_ZRzL themedComponent--light_dGsa"><img src="/img/angular_momentum.png" alt="Mike Polinowski :: Dev Notebook" class="themedComponent_ZRzL themedComponent--dark_pzCA"></div><b class="navbar__title text--truncate">Mike Polinowski</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/docs/tags">Tags</a><a class="navbar__item navbar__link" href="/Search">Search</a><a href="https://mpolinowski.github.io/Personal" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">About<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mpolinowski" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_kWbt colorModeToggle_GwZs"><button class="clean-btn toggleButton_fOL9 toggleButtonDisabled_STpu" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_DCeJ"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_DFgp"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_IP3a"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_IbdI"><div class="docsWrapper_JGIH"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_SdI4" type="button"></button><div class="docRoot_eRbX"><aside class="theme-doc-sidebar-container docSidebarContainer_Ta75"><div class="sidebarViewport_fgog"><div class="sidebar_oDHW"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_vPEQ"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/development">Development</a><button aria-label="Expand sidebar category &#x27;Development&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/devops">DevOps</a><button aria-label="Expand sidebar category &#x27;DevOps&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/machine-learning-ai-and-computer-vision">Machine Learning, AI and Computer Vision</a><button aria-label="Expand sidebar category &#x27;Machine Learning, AI and Computer Vision&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/automation-deep-vision-and-robotics">Automation, Deep Vision and Robotics</a><button aria-label="Collapse sidebar category &#x27;Automation, Deep Vision and Robotics&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/home-automation">Home Automation</a><button aria-label="Expand sidebar category &#x27;Home Automation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/mqtt">MQTT</a><button aria-label="Collapse sidebar category &#x27;MQTT&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2023-07-25-emqx-mqtt-broker-docker/2023-07-25">EMQX MQTT Broker with Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2022-07-24-mosquitto-broker-cross-compilation/2022-07-24">Mosquitto Broker Docker Cross-Compile</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2022-07-23-mosquitto-broker-compilation/2022-07-23">Mosquitto Broker from Source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2022-07-22-go-hello-world/2022-07-22">Go - MQTT Hello World</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2022-07-21-rust-hello-world/2022-07-21">Rust - MQTT Hello World</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2022-06-23-instar-mqtt-python-part-I/2022-06-23">INSTAR MQTTv5 with Python - Client Connection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2022-03-30--mqtt-with-rabbit-mq/2022-03-30">INSTAR MQTT with RabbitMQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2022-03-28--mqtt-message-server/2022-03-28">MQTT Message Server and Angular Frontend</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2022-03-27--build-mosquitto-from-source/2022-03-27">Building Eclipse Mosquitto v2 from Source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2022-03-26--mqtt-clients/2022-03-26">MQTT Clients</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2022-02-01--mosquitto-2-broker/2022-02-01">Mosquitto v2 MQTT Broker on Debian Bullseye</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2021-09-12--golang-paho-mqtt/2021-09-12">Go Paho MQTT Client</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2019-08-11--mqtt-home-assistant/2019-08-11">MQTT Networks with Home Assistant</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2019-08-10--mqtt-athom-homey/2019-08-10">MQTT Networks with Athom Homey</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2019-08-09--mqtt-homee/2019-08-09">MQTT Networks with homee</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2019-08-08--mqtt-homematic/2019-08-08">MQTT Networks with Homematic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2019-08-07--mqtt-iobroker/2019-08-07">MQTT Networks with ioBroker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2019-08-06--mqtt-node-red/2019-08-06">MQTT Networks with Node-RED</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2019-08-05--mqtt-openhab2/2019-08-05">MQTT Networks with OpenHAB 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2019-08-04--mqtt-android-dashboards/2019-08-04">MQTT Android Dashboards</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Automation_and_Robotics/MQTT/2019-08-03--mqtt-debugging/2019-08-03">Debugging MQTT Sensor Networks</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/robotics--simulation">Robotics &amp; Simulation</a><button aria-label="Expand sidebar category &#x27;Robotics &amp; Simulation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_lg0V"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_nDJs"><div class="docItemContainer_OGiL"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_k3Z9" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_JACu"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/automation-deep-vision-and-robotics"><span itemprop="name">Automation, Deep Vision and Robotics</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/mqtt"><span itemprop="name">MQTT</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">MQTT Networks with Homematic</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_QCOD theme-doc-toc-mobile tocMobile_N0YI"><button type="button" class="clean-btn tocCollapsibleButton_pHwF">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>MQTT Networks with Homematic</h1></header><p><img alt="Central, Hong Kong" src="/assets/images/photo-kt456d_645dhfh6dgjkhg4_d-6b44f9c4d9a5a7fb291968cd864b96ce.jpg" width="2196" height="1154"></p>
<ul>
<li><a href="#redmatic">Redmatic</a>
<ul>
<li><a href="#getting-started-with-node-red">Getting Started with Node-RED</a></li>
</ul>
</li>
<li><a href="#homematic-sensors-motion-detector">Homematic Sensors (Motion Detector)</a>
<ul>
<li><a href="#motion-detection">Motion Detection</a>
<ul>
<li><a href="#download-the-node-red-flow">Download the Node-RED Flow</a></li>
</ul>
</li>
<li><a href="#system-variables">System Variables</a>
<ul>
<li><a href="#download-the-node-red-flow-1">Download the Node-RED Flow</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="redmatic">Redmatic</h2>
<p>We already prepared a tutorial on how to install Redmatic - <a href="https://nodered.org">Node-RED</a> for Homematic - and take control over your camera via it&#x27;s HTTP Interface. You can find all the information there that you need to connect Homematic sensors to your CCU and how to set up your Homematic software to communicate with your INSTAR IP camera.</p>
<p>This time we are going to use the same tools, but will connect them to MQTT interface of your INSTAR Full HD camera.</p>
<h3 id="getting-started-with-node-red">Getting Started with Node-RED</h3>
<p>We have already worked with Node-RED and in conjunction with the <strong>MQTT protocol</strong> automated our IP Camera. Node-RED is very easy to install on the Homematic control panel using the <a href="https://github.com/HM-RedMatic/RedMatic">RedMatic</a> addon.</p>
<p>RedMatic combines several software components into one CCU add-on, a software package that can be conveniently installed on a Homematic CCU3 as additional software via the WebUI.</p>
<p>The Node-RED version installed comes with the CCU nodes for Node-RED, making it possible to implement rules, automation&#x27;s, scripts and connections of external services and systems for a homematic system in a simple, visual way - and this largely without any programming knowledge.</p>
<p>The visualization and control includes RedMatic WebApp and Node-RED Dashboard. RedMatic WebApp is a user interface that can be used immediately without further configuration.</p>
<ol>
<li>First, we need to download the latest version <a href="https://github.com/HM-RedMatic/RedMatic/releases">from Github</a>. You need the file <code>redmatic-&lt;version&gt;.tar.gz</code>:</li>
</ol>
<hr>
<p><img alt="Homematic CCU3" src="/assets/images/Homematic_MQTT_01-1c68b15c7c0d966383235eac55ccfde4.png" width="905" height="335"></p>
<hr>
<ol start="2">
<li>In the Homematic WebUI, go to Control Panel Add-on Software:</li>
</ol>
<hr>
<p><img alt="Homematic CCU3" src="/assets/images/Homematic_MQTT_02-99a26e95bc3196af53680d8b05144fde.png" width="800" height="314"></p>
<p><img alt="Homematic CCU3" src="/assets/images/Homematic_MQTT_03-adb2066da68eb3394251412ac96d2cf1.png" width="800" height="273"></p>
<hr>
<ol start="3">
<li>Select and install the downloaded file (<strong>can take up to 10min</strong>):</li>
</ol>
<hr>
<p><img alt="Homematic CCU3" src="/assets/images/Homematic_MQTT_04-5bf4b4bd56fa08ec3dcb643666a716a2.png" width="801" height="180"></p>
<p><img alt="Homematic CCU3" src="data:image/png;base64,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" width="800" height="234"></p>
<hr>
<ol start="4">
<li>Then wait until the CCU restarts - patience is required. The installation of RedMatic takes some time. Node-RED will be reachable under <code>http://&lt;ccu-adresse&gt;/addons/red</code>. And the Node-RED Dashboard under <code>http://&lt;ccu-adresse&gt;/addons/red/ui</code>:</li>
</ol>
<hr>
<p><img alt="Homematic CCU3" src="/assets/images/Homematic_MQTT_06-e5729b72a75d731dbc1ca1a2106780f0.png" width="800" height="287"></p>
<hr>
<p><strong>The default login is <code>Admin</code> (with a capital <code>A</code>) and the admin password on your CCU3!</strong></p>
<h2 id="homematic-sensors-motion-detector">Homematic Sensors (Motion Detector)</h2>
<h3 id="motion-detection">Motion Detection</h3>
<p>We now want to use a Homematic Motion Detector to have our Pan&amp;Tilt camera pan to <strong>Preset Position 2</strong> when a motion is detected. After the Motion Detector falls back to it&#x27;s idle state, we want our camera to pan back to <strong>Position 1</strong>.</p>
<ol>
<li>We start by dragging a CCU Value Node onto the workspace and double-clicking on it to open the configuration page.</li>
<li>Select BidCos-RF as an interface to embed your Homematic PIR motion detector.</li>
<li>If you click in the Channel field, you will see all RF devices connected to your Homematic center. When we trained our motion detector to the control panel, we saw that the name of the detector begins with NEQ1545018. We have two entries at our disposal - the first ends at :0 and the second at :1. We&#x27;ll pick the second one here (if you take the first one and you&#x27;ll see that there are other variables available, including LOWBAT, which includes a low battery warning that we could include in our Node-RED flows.)</li>
<li>As data point we choose Motion. This will always give us a message payload of true once the sensor has detected a movement.</li>
</ol>
<hr>
<p><img alt="Homematic CCU3" src="/assets/images/Homematic_MQTT_07-ddc4bb93ab1e6fc4efaa55e8ce60e928.png" width="714" height="568"></p>
<hr>
<p>The motion sensor will either send a <code>false</code> or <code>true</code> when his state changes - detected motion triggers the <code>true</code> state and after a cooldown it will fall back to <code>false</code>. To use this information we will add a <strong>Switch Node</strong> that separates those two messages:</p>
<hr>
<p><img alt="Homematic CCU3" src="/assets/images/Homematic_MQTT_08-34c1d2447b430e0a82f298a794c65f41.png" width="838" height="351"></p>
<hr>
<p>In case that we receive a <code>true</code> from our sensor (<strong>Alarm</strong>) we want to change this message payload to <code>{&quot;val&quot;:&quot;1&quot;}</code>. A <code>false</code> signifies that the sensor went back to sleep (<strong>Idle</strong>) and we have to change the message to <code>{&quot;val&quot;:&quot;0&quot;}</code>:</p>
<hr>
<p><img alt="Homematic CCU3" src="/assets/images/Homematic_MQTT_09-fdff83208ea1dddd58be9e49b946ef0b.png" width="967" height="327"></p>
<hr>
<p>This payload we can now use to trigger a preset on our camera through the MQTT interface. A value of <code>0</code> represents the first and a value of <code>1</code> the second preset position on our camera. The MQTT topic we have to send this information to is called <code>features/ptz/preset</code>. We can use a <strong>MQTT Out</strong> node to send this status update to our camera:</p>
<hr>
<p><img alt="Homematic CCU3" src="/assets/images/Homematic_MQTT_10-5c227b37505927d2d282099f785bc01f.png" width="882" height="279"></p>
<hr>
<p>For Node-RED to be able to connect to your camera&#x27;s MQTT Broker you first have to define the server. Type in your camera&#x27;s IP address and MQTT port, that you set inside your camera&#x27;s WebUI. If you choose the regular port (default <code>1883</code>) skip the following step. But if you want to use the TLS encryption for your MQTT network, choose the SSL port instead (default <code>8883</code>) and click to add your camera&#x27;s SSL certificate below:</p>
<hr>
<p><img alt="Homematic CCU3" src="/assets/images/Homematic_MQTT_11-6942c797a71376caec582e1bfb459948.png" width="885" height="476"></p>
<hr>
<p>Open your camera&#x27;s webUI and navigate to the MQTT Broker configuration menu under <strong>Features</strong>. There click on the <strong>Download</strong> button to download the client certificate file from your camera.</p>
<p>Back in Node-RED click on <strong>Upload</strong> to upload the certificate:</p>
<hr>
<p><img alt="Homematic CCU3" src="/assets/images/Homematic_MQTT_12-22d2811848524d99c97f6f63d2d0a085.png" width="730" height="228"></p>
<hr>
<p>With the TLS configuration set switch to the <strong>Security</strong> tab and enter the login you set in your MQTT broker configuration menu:</p>
<hr>
<p><img alt="Homematic CCU3" src="/assets/images/Homematic_MQTT_13-9c9b52cc0e3651986974edf346587050.png" width="745" height="342"></p>
<hr>
<p>Ok, you are all set. Every time the motion sensor is triggered your camera will now receive a command to go to <strong>Preset Position 2</strong> and return to __Position 1 when the sensor switches back to idle.</p>
<p>We can repeat the same steps for the door sensor we previously added to our Homematic system and send our camera to <strong>Preset Position 3</strong> to check out who opened the garage door:</p>
<hr>
<p><img alt="Homematic CCU3" src="/assets/images/Homematic_MQTT_14-86b46b2e5cf18de3a5984a64adeca7e4.png" width="700" height="295"></p>
<hr>
<h4 id="download-the-node-red-flow">Download the Node-RED Flow</h4>
<p>You can download the complete flow and import it into your Node-RED admin panel. Copy the JSON code below and, in Node-RED, click on the hamburger menu in the top right. Choose <strong>Import</strong> and copy the code into the input field. Click on red <strong>Import</strong> button and drag the flow in position.</p>
<pre><code class="language-json">[{&quot;id&quot;:&quot;d6b5f7c8.7183e8&quot;,&quot;type&quot;:&quot;ccu-value&quot;,&quot;z&quot;:&quot;427fc89b.e34038&quot;,&quot;name&quot;:&quot;Motion Detector&quot;,&quot;iface&quot;:&quot;BidCos-RF&quot;,&quot;channel&quot;:&quot;NEQ1545018:1 HM-Sen-MDIR-O-2 NEQ1545018:1&quot;,&quot;datapoint&quot;:&quot;MOTION&quot;,&quot;mode&quot;:&quot;&quot;,&quot;start&quot;:true,&quot;change&quot;:true,&quot;cache&quot;:false,&quot;queue&quot;:false,&quot;on&quot;:0,&quot;onType&quot;:&quot;undefined&quot;,&quot;ramp&quot;:0,&quot;rampType&quot;:&quot;undefined&quot;,&quot;working&quot;:false,&quot;ccuConfig&quot;:&quot;38263145.35ea0e&quot;,&quot;topic&quot;:&quot;${CCU}/${Interface}/${channel}/${datapoint}&quot;,&quot;x&quot;:100,&quot;y&quot;:100,&quot;wires&quot;:[[&quot;2471cac0.29f4d6&quot;]]},{&quot;id&quot;:&quot;d3434bbe.05fa58&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;427fc89b.e34038&quot;,&quot;name&quot;:&quot;Alarm&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;payload&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;{\&quot;val\&quot;:\&quot;1\&quot;}&quot;,&quot;tot&quot;:&quot;json&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:380,&quot;y&quot;:76,&quot;wires&quot;:[[&quot;a8958f92.4cb8c&quot;]]},{&quot;id&quot;:&quot;a8958f92.4cb8c&quot;,&quot;type&quot;:&quot;mqtt out&quot;,&quot;z&quot;:&quot;427fc89b.e34038&quot;,&quot;name&quot;:&quot;features/ptz/preset&quot;,&quot;topic&quot;:&quot;instar/000389888811/features/ptz/preset&quot;,&quot;qos&quot;:&quot;1&quot;,&quot;retain&quot;:&quot;false&quot;,&quot;broker&quot;:&quot;6df4e12a.0c747&quot;,&quot;x&quot;:556,&quot;y&quot;:99,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;2471cac0.29f4d6&quot;,&quot;type&quot;:&quot;switch&quot;,&quot;z&quot;:&quot;427fc89b.e34038&quot;,&quot;name&quot;:&quot;&quot;,&quot;property&quot;:&quot;payload&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;true&quot;},{&quot;t&quot;:&quot;false&quot;}],&quot;checkall&quot;:&quot;true&quot;,&quot;repair&quot;:false,&quot;outputs&quot;:2,&quot;x&quot;:252,&quot;y&quot;:100,&quot;wires&quot;:[[&quot;d3434bbe.05fa58&quot;],[&quot;6197b16.f4d705&quot;]]},{&quot;id&quot;:&quot;6197b16.f4d705&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;427fc89b.e34038&quot;,&quot;name&quot;:&quot;Idle&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;payload&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;{\&quot;val\&quot;:\&quot;0\&quot;}&quot;,&quot;tot&quot;:&quot;json&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:380,&quot;y&quot;:127,&quot;wires&quot;:[[&quot;a8958f92.4cb8c&quot;]]},{&quot;id&quot;:&quot;c7056a66.400448&quot;,&quot;type&quot;:&quot;ccu-value&quot;,&quot;z&quot;:&quot;427fc89b.e34038&quot;,&quot;name&quot;:&quot;Door Sensor&quot;,&quot;iface&quot;:&quot;BidCos-RF&quot;,&quot;channel&quot;:&quot;OEQ1985716:1 HM-Sec-SCo OEQ1985716:1&quot;,&quot;datapoint&quot;:&quot;STATE&quot;,&quot;mode&quot;:&quot;&quot;,&quot;start&quot;:true,&quot;change&quot;:true,&quot;cache&quot;:false,&quot;queue&quot;:false,&quot;on&quot;:0,&quot;onType&quot;:&quot;undefined&quot;,&quot;ramp&quot;:0,&quot;rampType&quot;:&quot;undefined&quot;,&quot;working&quot;:false,&quot;ccuConfig&quot;:&quot;38263145.35ea0e&quot;,&quot;topic&quot;:&quot;${CCU}/${Interface}/${channel}/${datapoint}&quot;,&quot;x&quot;:90,&quot;y&quot;:200,&quot;wires&quot;:[[&quot;1e91dd74.85f263&quot;]]},{&quot;id&quot;:&quot;daa36829.abb308&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;427fc89b.e34038&quot;,&quot;name&quot;:&quot;Alarm&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;payload&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;{\&quot;val\&quot;:\&quot;2\&quot;}&quot;,&quot;tot&quot;:&quot;json&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:380,&quot;y&quot;:176,&quot;wires&quot;:[[&quot;7de0a4c1.0f702c&quot;]]},{&quot;id&quot;:&quot;7de0a4c1.0f702c&quot;,&quot;type&quot;:&quot;mqtt out&quot;,&quot;z&quot;:&quot;427fc89b.e34038&quot;,&quot;name&quot;:&quot;features/ptz/preset&quot;,&quot;topic&quot;:&quot;instar/000389888811/features/ptz/preset&quot;,&quot;qos&quot;:&quot;1&quot;,&quot;retain&quot;:&quot;false&quot;,&quot;broker&quot;:&quot;6df4e12a.0c747&quot;,&quot;x&quot;:556,&quot;y&quot;:199,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;1e91dd74.85f263&quot;,&quot;type&quot;:&quot;switch&quot;,&quot;z&quot;:&quot;427fc89b.e34038&quot;,&quot;name&quot;:&quot;&quot;,&quot;property&quot;:&quot;payload&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;true&quot;},{&quot;t&quot;:&quot;false&quot;}],&quot;checkall&quot;:&quot;true&quot;,&quot;repair&quot;:false,&quot;outputs&quot;:2,&quot;x&quot;:252,&quot;y&quot;:200,&quot;wires&quot;:[[&quot;daa36829.abb308&quot;],[&quot;10361ae7.7e6fb5&quot;]]},{&quot;id&quot;:&quot;10361ae7.7e6fb5&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;427fc89b.e34038&quot;,&quot;name&quot;:&quot;Idle&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;payload&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;{\&quot;val\&quot;:\&quot;0\&quot;}&quot;,&quot;tot&quot;:&quot;json&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:380,&quot;y&quot;:227,&quot;wires&quot;:[[&quot;7de0a4c1.0f702c&quot;]]},{&quot;id&quot;:&quot;28e6bcd8.29e804&quot;,&quot;type&quot;:&quot;comment&quot;,&quot;z&quot;:&quot;427fc89b.e34038&quot;,&quot;name&quot;:&quot;Homematic Sensors&quot;,&quot;info&quot;:&quot;&quot;,&quot;x&quot;:110,&quot;y&quot;:40,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;38263145.35ea0e&quot;,&quot;type&quot;:&quot;ccu-connection&quot;,&quot;z&quot;:&quot;&quot;,&quot;name&quot;:&quot;localhost&quot;,&quot;host&quot;:&quot;localhost&quot;,&quot;regaEnabled&quot;:true,&quot;bcrfEnabled&quot;:true,&quot;iprfEnabled&quot;:true,&quot;virtEnabled&quot;:true,&quot;bcwiEnabled&quot;:false,&quot;cuxdEnabled&quot;:false,&quot;regaPoll&quot;:true,&quot;regaInterval&quot;:&quot;30&quot;,&quot;rpcPingTimeout&quot;:&quot;60&quot;,&quot;rpcInitAddress&quot;:&quot;127.0.0.1&quot;,&quot;rpcServerHost&quot;:&quot;127.0.0.1&quot;,&quot;rpcBinPort&quot;:&quot;2047&quot;,&quot;rpcXmlPort&quot;:&quot;2048&quot;},{&quot;id&quot;:&quot;6df4e12a.0c747&quot;,&quot;type&quot;:&quot;mqtt-broker&quot;,&quot;z&quot;:&quot;&quot;,&quot;name&quot;:&quot;IN-9010 Full HD&quot;,&quot;broker&quot;:&quot;192.168.2.165&quot;,&quot;port&quot;:&quot;8883&quot;,&quot;tls&quot;:&quot;95eab325.77ade&quot;,&quot;clientid&quot;:&quot;&quot;,&quot;usetls&quot;:true,&quot;compatmode&quot;:false,&quot;keepalive&quot;:&quot;60&quot;,&quot;cleansession&quot;:true,&quot;birthTopic&quot;:&quot;&quot;,&quot;birthQos&quot;:&quot;0&quot;,&quot;birthPayload&quot;:&quot;&quot;,&quot;closeTopic&quot;:&quot;&quot;,&quot;closeQos&quot;:&quot;0&quot;,&quot;closePayload&quot;:&quot;&quot;,&quot;willTopic&quot;:&quot;&quot;,&quot;willQos&quot;:&quot;0&quot;,&quot;willPayload&quot;:&quot;&quot;},{&quot;id&quot;:&quot;95eab325.77ade&quot;,&quot;type&quot;:&quot;tls-config&quot;,&quot;z&quot;:&quot;&quot;,&quot;name&quot;:&quot;&quot;,&quot;cert&quot;:&quot;&quot;,&quot;key&quot;:&quot;&quot;,&quot;ca&quot;:&quot;&quot;,&quot;certname&quot;:&quot;instar-cert.cert&quot;,&quot;keyname&quot;:&quot;&quot;,&quot;caname&quot;:&quot;&quot;,&quot;servername&quot;:&quot;&quot;,&quot;verifyservercert&quot;:true}]
</code></pre>
<ul>
<li>You can use this flow with your own sensors - just change the selected sensor in the first node of each flow.</li>
</ul>
<hr>
<p><img alt="Homematic CCU3" src="/assets/images/Homematic_MQTT_15-d25b1929fb9491be766b7d6d5258e89a.png" width="736" height="650"></p>
<hr>
<h3 id="system-variables">System Variables</h3>
<p>We can also use a <strong>System Variable</strong> to send a MQTT update to our camera. As an example we want to create a variable that <code>Daheim</code> (<em>home</em>) that we want to trigger every time we enter our our home. When this happens we want the motion detection on our camera&#x27;s to be deactivated.</p>
<p>Lets start by creating this variable by clicking on <strong>Einstellungen</strong> and <strong>System Variable</strong>. The variable should be <code>true</code> when I am at home and <code>false</code> when I am away:</p>
<hr>
<p><img alt="Homematic CCU3" src="/assets/images/Homematic_MQTT_16-a6d0cf6d05f8b0bba2b4eaca957c165c.png" width="917" height="315"></p>
<hr>
<p>Now we can switch to Node-RED and drag a <strong>SysVar</strong> node onto the canvas. Select the <code>Daheim</code> variable we just created and check that you want it&#x27;s value to be emitted on change:</p>
<hr>
<p><img alt="Homematic CCU3" src="/assets/images/Homematic_MQTT_17-b11e8f1902468c0a6abc6adbe5c0e9c0.png" width="701" height="406"></p>
<hr>
<p>The rest of this flow is identical to the 2 we created earlier. We have to distinguish between a message with payload <code>true</code> or <code>false</code>, change the payload according to the command we want to send and assign the MQTT topic.</p>
<p>If you are using the internal PIR sensor of your camera to detect motion, you can use the <code>alarm/actions/pir/enable</code> topic to switch it on or off by either sending <code>{&quot;val&quot;:&quot;1&quot;}</code> or <code>{&quot;val&quot;:&quot;o&quot;}</code>.</p>
<p><strong>Note</strong> this works for the camera models IN-8015 FHD and IN-9008 FHD. The camera model IN-9020 FHD uses the <code>alarm/actions/alarmin</code> command instead to switch the PIR.</p>
<hr>
<p><img alt="Homematic CCU3" src="/assets/images/Homematic_MQTT_18-b0e3c9dd826cbf61a8a48936cc868193.png" width="683" height="120"></p>
<hr>
<h4 id="download-the-node-red-flow-1">Download the Node-RED Flow</h4>
<p>You can download the complete flow and import it into your Node-RED admin panel. Copy the JSON code below and, in Node-RED, click on the hamburger menu in the top right. Choose <strong>Import</strong> and copy the code into the input field. Click on red <strong>Import</strong> button and drag the flow in position.</p>
<pre><code class="language-json">[{&quot;id&quot;:&quot;e23a5982.cd37b8&quot;,&quot;type&quot;:&quot;ccu-sysvar&quot;,&quot;z&quot;:&quot;427fc89b.e34038&quot;,&quot;name&quot;:&quot;Daheim&quot;,&quot;ccuConfig&quot;:&quot;38263145.35ea0e&quot;,&quot;topic&quot;:&quot;ReGaHSS/${Name}&quot;,&quot;change&quot;:true,&quot;cache&quot;:true,&quot;x&quot;:80,&quot;y&quot;:320,&quot;wires&quot;:[[&quot;1bc1f6f2.fbf029&quot;]]},{&quot;id&quot;:&quot;f36b8a95.38f2b8&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;427fc89b.e34038&quot;,&quot;name&quot;:&quot;home&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;payload&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;{\&quot;val\&quot;:\&quot;0\&quot;}&quot;,&quot;tot&quot;:&quot;json&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:340,&quot;y&quot;:296,&quot;wires&quot;:[[&quot;91a19433.03d868&quot;]]},{&quot;id&quot;:&quot;91a19433.03d868&quot;,&quot;type&quot;:&quot;mqtt out&quot;,&quot;z&quot;:&quot;427fc89b.e34038&quot;,&quot;name&quot;:&quot;alarm/actions/pir/enable&quot;,&quot;topic&quot;:&quot;instar/000389888811/alarm/actions/pir/enable&quot;,&quot;qos&quot;:&quot;1&quot;,&quot;retain&quot;:&quot;false&quot;,&quot;broker&quot;:&quot;6df4e12a.0c747&quot;,&quot;x&quot;:536,&quot;y&quot;:319,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;1bc1f6f2.fbf029&quot;,&quot;type&quot;:&quot;switch&quot;,&quot;z&quot;:&quot;427fc89b.e34038&quot;,&quot;name&quot;:&quot;&quot;,&quot;property&quot;:&quot;payload&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;true&quot;},{&quot;t&quot;:&quot;false&quot;}],&quot;checkall&quot;:&quot;true&quot;,&quot;repair&quot;:false,&quot;outputs&quot;:2,&quot;x&quot;:212,&quot;y&quot;:320,&quot;wires&quot;:[[&quot;f36b8a95.38f2b8&quot;],[&quot;da80c0a1.e74de&quot;]]},{&quot;id&quot;:&quot;da80c0a1.e74de&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;427fc89b.e34038&quot;,&quot;name&quot;:&quot;away&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;payload&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;{\&quot;val\&quot;:\&quot;1\&quot;}&quot;,&quot;tot&quot;:&quot;json&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:340,&quot;y&quot;:347,&quot;wires&quot;:[[&quot;91a19433.03d868&quot;]]},{&quot;id&quot;:&quot;38263145.35ea0e&quot;,&quot;type&quot;:&quot;ccu-connection&quot;,&quot;z&quot;:&quot;&quot;,&quot;name&quot;:&quot;localhost&quot;,&quot;host&quot;:&quot;localhost&quot;,&quot;regaEnabled&quot;:true,&quot;bcrfEnabled&quot;:true,&quot;iprfEnabled&quot;:true,&quot;virtEnabled&quot;:true,&quot;bcwiEnabled&quot;:false,&quot;cuxdEnabled&quot;:false,&quot;regaPoll&quot;:true,&quot;regaInterval&quot;:&quot;30&quot;,&quot;rpcPingTimeout&quot;:&quot;60&quot;,&quot;rpcInitAddress&quot;:&quot;127.0.0.1&quot;,&quot;rpcServerHost&quot;:&quot;127.0.0.1&quot;,&quot;rpcBinPort&quot;:&quot;2047&quot;,&quot;rpcXmlPort&quot;:&quot;2048&quot;},{&quot;id&quot;:&quot;6df4e12a.0c747&quot;,&quot;type&quot;:&quot;mqtt-broker&quot;,&quot;z&quot;:&quot;&quot;,&quot;name&quot;:&quot;IN-9010 Full HD&quot;,&quot;broker&quot;:&quot;192.168.2.165&quot;,&quot;port&quot;:&quot;8883&quot;,&quot;tls&quot;:&quot;95eab325.77ade&quot;,&quot;clientid&quot;:&quot;&quot;,&quot;usetls&quot;:true,&quot;compatmode&quot;:false,&quot;keepalive&quot;:&quot;60&quot;,&quot;cleansession&quot;:true,&quot;birthTopic&quot;:&quot;&quot;,&quot;birthQos&quot;:&quot;0&quot;,&quot;birthPayload&quot;:&quot;&quot;,&quot;closeTopic&quot;:&quot;&quot;,&quot;closeQos&quot;:&quot;0&quot;,&quot;closePayload&quot;:&quot;&quot;,&quot;willTopic&quot;:&quot;&quot;,&quot;willQos&quot;:&quot;0&quot;,&quot;willPayload&quot;:&quot;&quot;},{&quot;id&quot;:&quot;95eab325.77ade&quot;,&quot;type&quot;:&quot;tls-config&quot;,&quot;z&quot;:&quot;&quot;,&quot;name&quot;:&quot;&quot;,&quot;cert&quot;:&quot;&quot;,&quot;key&quot;:&quot;&quot;,&quot;ca&quot;:&quot;&quot;,&quot;certname&quot;:&quot;instar-cert.cert&quot;,&quot;keyname&quot;:&quot;&quot;,&quot;caname&quot;:&quot;&quot;,&quot;servername&quot;:&quot;&quot;,&quot;verifyservercert&quot;:true}]
</code></pre></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_aHIs padding--none margin-left--sm"><li class="tag_nwHU"><a class="tag_QDqo tagRegular_RTiO" href="/docs/tags/mqtt">MQTT</a></li><li class="tag_nwHU"><a class="tag_QDqo tagRegular_RTiO" href="/docs/tags/smarthome">Smarthome</a></li><li class="tag_nwHU"><a class="tag_QDqo tagRegular_RTiO" href="/docs/tags/io-t">IoT</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Automation_and_Robotics/MQTT/2019-08-08--mqtt-homematic/index.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_NulP" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated__GQF"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Automation_and_Robotics/MQTT/2019-08-09--mqtt-homee/2019-08-09"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">MQTT Networks with homee</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Automation_and_Robotics/MQTT/2019-08-07--mqtt-iobroker/2019-08-07"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">MQTT Networks with ioBroker</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_IS5x thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#redmatic" class="table-of-contents__link toc-highlight">Redmatic</a><ul><li><a href="#getting-started-with-node-red" class="table-of-contents__link toc-highlight">Getting Started with Node-RED</a></li></ul></li><li><a href="#homematic-sensors-motion-detector" class="table-of-contents__link toc-highlight">Homematic Sensors (Motion Detector)</a><ul><li><a href="#motion-detection" class="table-of-contents__link toc-highlight">Motion Detection</a></li><li><a href="#system-variables" class="table-of-contents__link toc-highlight">System Variables</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Research</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Notebook</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tags">Tags</a></li><li class="footer__item"><a class="footer__link-item" href="/Curriculum-Vitae">CV</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/in/mike-polinowski-6396ba121/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/MikePolinowski" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.flickr.com/people/149680084@N06/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flickr<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/mpolinowski" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright  2023 Mike Polinowski, INSTAR Deutschland GmbH, Shenzhen - China.</div></div></div></footer></div>
</body>
</html>